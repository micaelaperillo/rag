many of you maybe most of you will never to work another search problem by hand in your natural life now this others will want to take another run out of it on the final i've been much criticized for this way of doing grading in the class but the way i look at it is that the relationship between students and instructors ought to be less adversarial than it used to be in a good old days when i was when I was a student I especially remember a examination we took all of us took on Raleigh scattering that was 803 I think and back in the old days we had to take four physics courses not just two and we had to take four math courses not just two back in the days when well I was going to say men were men but most of us were men in those days I think we only had 20 women in our class anyway we had of course we had a quiz on Raleigh's scattering and I thought well this is pretty hard and then I got my quiz back 26 I thought well I've been found out I'm going to flunk out my father will make me go to law school I'll never attract anyone to marry horrible things will happen then the instructor announced class average was 18 I was two standard deviations above that they gave us the same they gave us the same exam two weeks later and accounts vary some people say that the class average went down anyway today we're going to study some stuff we're gonna study some stuff that will make it possible if you understand how you can do that computation in just a couple of seconds even with the delays introduced by the by the redrawing now this particular program I'm not real sure and I don't have a proof but I think it will take more than the lifetime of the universe to find a four car to find a legitimate coloring of VO continental United States but by the end of the next class you'll see how to do that lickety-split in just a couple of seconds with the redisplay delays now we could of course do this in two ways one way is I can start off by saying let's see be a constraint satisfaction problem and just give you the result and anybody can do that that's great and you need to learn some stuff that way but there are some things that you need to learn I think a different way and that different way involves my telling you the story of how it all came to be this is a new field pretty much and therefore I know most of the people in it and I know all of the people who did the work that I want to tell you about today and I'm going to tell you a little bit about the struggle for coming up with the ideas that led to the lead one of the most powerful one of those powerful methods we learn about in the subject it all has to do original E with an attempt to make a computer capable of seeing and everybody said to themselves well let's start with seeing simple things like children's blocks and so Aldo faux Guzman a graduate student of Marvin Minsky's was charged with the summer project which led to his PhD thesis of writing a program that could look at a line drawing and determine how many objects are in the line drive so for example there behind my outline is a line drive and you know instantly or you believe instantly that there are two objects there even though in some deep sense it's ambiguous there are all sorts of ways that you could through trickery arrange something with even seven objects that look that way but most most people would say there are two objects so Guzman said about the problem of figuring out how to do that and then his work was followed up by Dave Huffman and his work was followed up by Dave Waltz and his work was followed up by jean freud or who's not listed there quite yeah and I want to tell you a little bit of story how that all happened so Guzman took a lot of pictures he went to Boston baby the precursor to Toys R Us purchased a large block set on a government contract and to what about the business of taking a lot of pictures of them sort of get a feel for the domain and eventually he decided that he could build a program that could determine that there are two objects here by using the lines as s quanta of evidence about which faces belong together in an object so he said after studying these for a long time that these drawings tend to have a lot of arrow type junctions and a lot of fork type junctions and when you see an arrow it's a little bit of evidence that the objects on either side of the shaft are the same the face on either side of the shaft along the same object and over here the fork type Junction it suggests that the pairwise three pairs of faces seem to belong to the same object so with that idea he could come back to a drawing like this and start decorating it with these so-called links these quanta of evidence that phases belong to the same object and if I've done it right you get something that looks like so it's a little hard to see what's going on on the drawing itself so let me number these now I have the easier to deal with picture there are two links between 1 & 2 & 1 & 3 1 lengths between 2 & 3 1 between 2 & 4 2 here 2 here and one each from all of these so Guzman produces this evidence for how the problem ought to be solved and then it begins to think about various ways of using the evidence so he could and did decide that one length is enough to presume that the faces belong to the same object and you can see that that's a little bit too liberal because that says the whole thing is just one object so Guzman the rejected the one length the one link theory and went to the Tulane theory and the two link theory says oh well let's see if we insist that 2 links so be there before we are willing to decide that it's the same object then these three faces are pulled together into one object these three are pulled together into one object where the last 7 doesn't share two links with anything so it's left dangling out there so plainly the two link theory is too conservative so that as you would soon discover neni UROP project would lead you to the third theory which is two links repeated so now that we form these super regions we can come back and say will merge super regions if they're connected together by two or more links so nothing new happens up here but this super region is joined at 7 by more than by two or more links so I pulls everything together like so so that worked fine well it didn't work fine there were lots of examples of situations where it didn't work and nonsensical such and in situations that were considered nonsensical by us humans because they just didn't didn't seem it seems silly the kind of conclusions that it reached so when the Guzman presented this work in his PhD thesis defense it said and who knows if it's true but it said that Marvin Minsky thought it was great work and we should make him a professor it happens that Dave Huffman was also on the committee and said that it was ad hoc and the thesis should be rejected so we had two polar opposites of impressions there Dave Huffman by the way you've heard that name before I imagine it's the it's the guy who invented Huffman coding as a term paper in a information theory course taught by Bob Fano he got an a they say so Huffman didn't like it he thought it was a little bit too ad-hoc it was too heuristic it didn't take advantage of anything we might know about physics and so people began to say well why does it work and when does it not work and that's just about the best question you can answer in a situation like this and by playing with some more of Guzman's pictures and reflecting on them it turned out that it worked because the world is full of three-phase junctions well let me say three things for Texas because they're out there in the world we'll reserve the word Junction for something else and three-phase vertexes generally project into either an arrow or a fork so this one's whole program worked on the weak backward conclusion that if you see one of those it probably came from one of these so this is in the drawing that's in the world so by a process is neither deduction nor induction but rather abduction you see one of those guys you say well they often come from preface vertexes in the world so if you see one it probably came from the three-phase vertex in the world that's abduction so what's the Huffman's all that being a mathematician he began to think about how one might develop a different and better theory but we have to recognize that all this work started off for the efforts of Guzman who was an experimentalist and huffman was a mathematician so naturally they approached the problem differently so Huffman says I'm not going to concern myself too much with the actual problem that Gulen was trying to solve rather I'm going to work in a very simple world which I can deal with mathematically so he decided that he was going to work in a world which had several characteristics characteristics number one was that the world would be presented in general position that is a say no screw cases so if you see a cube it's going to look like this and it's not going to look like this so that's out and this is in and the idea here is that that's not general position because you perturb your point of view a little bit you'll change those T junctions into Forks and arrows so we don't had to deal with those kinds of weird kinds of cases so this that's presumption number one presumption number two is that we're going to be dealing with a world that's trihedral that means all vertex is out there are going to be formed from three planes so we're going to have the intersection of three planes so how many kinds of junctions can you see if the world is composed that way is the question that Huffman sent himself upon the next assumption was that they're going to be four kinds of lines see Guzman only recognized two kinds of lines lines that have a length of lines that don't have a length and they don't have very much to do with the physical world so Huffman says I want to get the constraint out of the physical world so I'm going to deal with four kinds of lines concave convex and boundary all right so each of those kinds of lines is going to be is going to have its own notation we'll call the convex lines plus the concave lines - and the boundary lines are going to get an arrow on them depending on which side of the object you would which side you would see the object if you walk along the direction of this little arrow let me yeah sorry thank you so concave convex and boundary thank you so this down here that's a concave line and that would get a minus label oh I don't know these lines you're seeing here if there were stuff behind them instead of me then all those would be convex lines many times you see a boundary line for example now you don't see both sides of that line down here at the bottom so that's a boundary line and the arrow would point in that direction so as to keep the stuff of the object on the right as you walk along a kind of mathematical convention so three kinds of lines four kinds of labels and there's some things left out that's because Huffman wanted to keep his problem simple something he can manage by hand what's left out cracks or left out shadows are left out there's nothing to do there's presumption that there's no nothing of interest here with respect to that so let's have a little vocabulary before I before I go on and I'll try to stick to it but there's the stuff out there that consists of vertexes and edges and over here on the blackboard will have junctions and lines and I'll try to stick that vocabulary all right yes Christopher yeah there four kinds of look what I weigh questions didn't I say there are four kinds of lines there are three kinds of lines but since we can label a boundary line in either direction we have four labels okay it depends on which side of the object this stuff is on and that will be clear clear I think this as I do an example so one two three assumptions a little bit of vocabulary so we have the possibility of making a complete catalogue this is so simple we have the possibility of making a complete catalogue of all the ways that lines can come together to form a junction with respect to these four labels now at first you might say oh my god that will take a couple of years but maybe it will take a couple of years and in the end - perhaps you're surprised you discover that there are only eighteen ways to arrange the labels around a junction in this world everything else is excluded if you have something that's not in the set we're going to produce now it can't be built with trihedral vertexes so I've listed up there six cells Five Forks for T's and three arrows let's see if I can figure out why there are those 18 and nothing else well if we have three face three vertex is coming together that means there are eight octants right and the stuff of the object may fill one two three four five six seven or all eight octants now of course if you fill all eight octants there's no junction so we don't consider that case if we don't fill any of the octants there's no junction so we there's no vertex so we don't consider that case but it's just one of the eight octants is filled with stuff then we can look at it from any of the seven remaining Auctions so right now you're looking at it from one of the seven remaining opt-ins and if I'm not mistaken you're going to see a fork-style junction there right and you're going to see a fork-style junction in which all of the edges are con effects and unfortunately an unfortunate selection of names because the linguist tell me that we index all of our words by the first phoneme and those have the same first phoneme so they're easily confused so here's a fork style Junction and we know that one way that's legitimate for the lines that come in is with four pluses now that's not the only way you can see that and here's another way there's an LTL Junction right and both of those are boundary lines and we want to draw the boundary line indicators on there so that if we walk along the arrows the stuff of the object would be on the right so I suppose to make it easier for me to do my drawing I should look at it this way and then I would say well that has to be a legitimate way of labeling a junction are there any more well there's there's seven altogether but many of them are the same there is one more that's a little different though I can hold this guy up like so and if I'm holding it the right angle for you you see an arrow style Junction right two boundaries and the Barb is convex so in this particular case I've got that I've got that and I've got a plus there and that's all that happen to be for the one octant filled with stuff case I happen to be able to reverse this though and here's the seven octants filled case right so that tells us that it's possible to have a vertex outside under space that when reduced to a junction on the board deserves three minus labels because all of these that you're seeing now are concave so another fork-style junction looks like so and since there's only one octant to look at from that completes our analysis of the of the seven octants filled case now we have a couple other possibilities here we might have five options filled with stuff so that means there are three options that we can look from so let's suppose that these little chalk pieces are little people and they're looking at this Junction down there where this white object is fused with the table I'm fusing it with the table because I want to consider it to be one object we can view it from the three objects indicated by those three little chalk pieces and ask ourselves well in the in the event that we look at it from those three places what do we see and if we look at it from from the perspective of the piece of purple chalk I'll have to walk around to be sure looks like a narrow junction with two concave and a convex they get there right well so I'm looking at it from this perspective it's an arrow this is convex and these two are concave because I fuse the paper the paper box with the table looking at it from the perspective of this blue guy let me rotate it so you can have a better understanding of the blue guy it looks like a concave line and a boundary so it's an L and this one is a boundary and that's concave and by a kind of symmetry we're also going to get that one from the other side the third of the three octaves well we're often running but we still have an awful lot to go and we could we could manage to deal with it by thinking about this object once again but instead of instead of this situation out here to turn it around and look at this vertex think about the junctions that it can produce I think I'll do that for you because you really have to play with this and move it a little bit to see how things are going to look so let me let me think about how that's going to work out I know that one of the possibilities is going to look like so I might as well not hide that from you it's going to be what happens when there's a little man looking up at the junction and this one's going to be - and now we got two more there just like that it look like so and you say oops you say aren't those just the rotational variants of each other and the answer is sure I write them all down because if you get a fork style junction in space there are three different ways that can be labeled depending on which of the which of the lines you put the minus minus label on so that takes care of that and then there's a one more of these fork style junctions and that's um plus plus minus that derives from this case and there appear to be three more of these L style junctions and they look like let's see plus then plus I'm having to think this through as I go and then and that's it what about the t's well in this world the only way you can get a T is if some object is obscuring another object and if an object is obscuring a line it can be any line at all so that's why the four remaining ones are easy beyond description to label and of course the cross pieces of the T are all boundary lines with the obscuring object on the right now let's see we've taken care now of the one three five and seven object octants filled cases what about two four and six well it turns out you can have vertexes that are made that way too but they will have more than three faces have six faces you'll be like what happens when an object comes together at a point like so like that you can play with a little bit and see that if you have two four or six objects filled with stuff there are more than three faces so we're going to ignore those so our constraint is going to be a little more a little more severe than would be suggested by the terminology Huffman use is its they're going to be try he'd roll all right they're also going to be three phases so we went to a lot of work there but what do we discovered who discovered it in this world this is a complete 100% nothing excluded nothing else can be there catalog of all possible ways that junctions can have line labels arranged around them there's nothing else in this world so that's a very powerful constraint so now let's see what we can do with it this example is usually more fun when the Red Sox are doing better but they're not it yet we'll use it anyway we're going to start with a with an object that looks like home plate and now I ask you the question can you build one of those I don't know let's give it a shot we're going to assume that this object is hanging floating in space so therefore all of these lines around the boundary are boundary lines like so now that gets us off to a good saying in space Christian all right you look confused just hanging in space so otherwise around the edges are places where you see only one one only one side has stuff on it so so that enables us to just quickly run around the periphery and put arrow labels on all those outside lines now we have a lot of arrow style junctions on the boundary that's commonly the case so we can run over to our catalog of all possible labels and we see that if we have an arrow with boundaries on its barbs there's only one of those so I know instantly that there must be a plus on the shaft so we can come back here and take all these arrows here and label them with plus lines on their shafts and a line can't change its nature along its length so if it's a plus line on one end it's going to be a plus line on the learn all right so what else can we do here is in the deep inside is a fork-style junction it's got concave markers I'm sorry convex markers on both of those two lines so we go over to our catalog and say what can we say about it given that there are pluses on two of its lines what that means that the third one has to be a plus as well and now we're done we've labeled everything except for this what about that guy there's an error there's an L style Junction with pluses on both of its two lines is there one of those in my catalog No therefore I haven't passed a necessary condition for constructability in the world that I've made you can't make it you can't construct it so Huffman's ideas give us a way of testing something to see if it's not possible for it to be in this world if it passes the test does that mean it's possible no it's a necessary but not sufficient condition on this one look all our occupation on this one maybe it will help if we put in another line for example we could put in a line like so you feel better about it now I don't know me let's see this has to be a plus for the same argument we used on several other arrows before that gives us a arrow style junction here with a plus on everything is there such a junction label no we lose doesn't help you think you can make it but you can I think you should be constructive as a 3G he thinks you can construct it as a 3d object let me show you the next example Christopher consider this example you make that your intuition is yes so let's label it I've already lost we just boost that up a little bit to make it the situation more clear so already I've got myself in the situation where I can't label that but you feel like you can make it so what's what's wrong what's wrong is what Eliot putting a little interpretation on what Eliot has said if you look at this situation back here you get a four faced Junction there so you can make it but not with three faces so some of these some of these look like you can make it but they can't be labeled because you need more than four faces at a junction and we can carry that idea back here if you can you can make this okay but this Junction you got two in the back and two here so it has four faces same idea all right so that's that's that's that's coos month's contribution that's Huffman's contribution Huffman was a mathematician but we wanted to build robots back in those days neither one of these guys solve the problem of dealing with natural objects with shadows with cracks with more than trying he drooled vertexes in space and what to do about that well that was a problem that another graduate student David Waltz said about to solve so waltz decided that he would not be content unless he added cracks shadows non trihedral vertexes oh yeah non Fridays over Texas and shadows over Texas and light these considerations led walls to go from four labels to 50-plus because he had to pack a lot of information into each of the labels that he put on the line what kind of light was on the right what kind of light was on the left maybe it's a crack maybe it's a crack that all sorts of considerations here we had 18 ways that lines can come together around junctions that went to thousands of junctions in waltzes world so here's Guzman he writes a program that sort of works down below we have Huffman Huffman who has a theory but solves the wrong problem so here's here comes walls and he's trying to solve the right problem with with a satisfying theory that has a generalizable principle so when we get all through with this we'll talk about criteria for success and we'll conclude that have a really successful thing you need a problem to start with you need a method that works and you have to show that it works because of some principle so guzman had the problem and something that worked Huffman had a method which worked on the wrong problem and it's left to waltz to bring it all together so waltz does all of this work and now he has instead of 18 labels he has thousands instead of four line labels he has more than 50 so naturally it becomes difficult to work these by hand we will able to work those examples with and with those those Huffman examples by hand we started with labeling everything on the boundary and worked our way and there's no particular method there which is easy to work out the puzzle but for waltz he didn't have that luxury so he might have in a typical scene you might have tens or even hundreds of junctions to label and no easy way of dealing with it so naturally writes himself a depth-first search program so here is vertex or rather Junction number one there are many choices for which label can be used on it and for each of those chain choices whatever he's decided Junction number two is has its own suite of possibilities and so it becomes a simple depth-first search problem right so in actuality as soon as so as soon as waltz he was my officemate at the time I could tell you this for a fact as soon as he wrote this program he kept looking over at the computer they were big in those days they all had lights so you looked over the computer see if the lights were still blinking because he'd start this depth-first search program up and nothing would happen he thought the computer had crashed nothing happened why did nothing happen because the search space is exponential and much too big for an ordinary computer or maybe even an ordinary universe so walls has to do something else he has to come up with a new method for using all these labels that he's that he's after about a year and a half's worth of hard work with lots of paper on his desk of little blocks after a year and a half hard work getting all these jokes and labels figured out he didn't has to come up with a method for figuring out how to use them and so we don't know whether to think his biggest contribution was that label set or his method and probably both deserve about equal billing oh I don't know how did how to explain what Waltz did well one way is to do an example and I think I will hazard an example let's see let me find some space I think I'm reduced to going over here but that'll be convenient since the line levels are here here's my example okay so how can I give you just partial a part of a picture well I can suit you can assume I'm looking at this through a window so the edge of the window form boundary lines and they exert no constraint whatsoever on what's behind them so this is a legitimate drawing to have to think about by the way is this ambiguous or do you get a firm sense that there's an au Niek interpretation of all those lines I think it's there's a unique interpretation of all those lines what what I'm going to do is I'm actually going to solve this problem using Huffman's labels but waltzes method because I can't simulate on a blackboard something with with with 50 line types and thousands of line junctions so I'm going to use Huffman set to demonstrate walsh's algorithm so Wilson's algorithm involves starting out by plopping on some Junction all of the possible things that can all of the possible labels that the the answer has to be drawn from so let me number these in the order that we're going to visit them so and so far I've just put down the three fork options that are resident on that first Junction and I have to take note of exactly what they do with the lines that come out of the junction so let's say I'll just copy them down one possibility is this one another possibility is this one and another possibility is + + - oops I've got plus plus no that's right so that right so far all I've done is copy the the junction labelings from my library and at this point Walters algorithm says there's nothing else to do but go onto Junction number you and unfortunately sadly there are lots of labelings that have to be considered on junction number two six of them one two three four five six so one of them looks like that another one looks like that one of them is plus here arrow in another one is plus here arrow out another one is minus here arrow down and minus here arrow up I think I've copied those alright but now having copied those down Walt's falses algorithm looks around at the neighboring junctions and says are any of the things that I just placed on Junction 2 disallowed but what I've already placed on a neighboring Junction so it looks over here in step number two and it sees that these three arrows require the line that joins junctions 1 & 2 to be either minus or plus right so of the six possibilities I can only keep the ones that are likewise content to put a plus on that line that joins the two so that means that the influence flowing from Junction 1 eliminates that one eliminates that one eliminates that one and eliminates that one so half of them are gone all the ones that try to put a boundary line on that line between 1 & 2 or disallow all right now likewise we could say well of the remaining ones do they restrict what I can do at Junction 1 so let's see here's a minus and here's a plus so both of those both all of these possibilities over here are still alive so now continuing on we have to see what we can do in junction 3 these are arrow labels again so we have to copy exactly the same label set as we had before and now we look down on you look down in junction to and say well what does that tell me about the three that I've just placed if we look up from Junction 2 to see what kind of constraints it puts on here we have this one alive and this one a lot I guess we've eliminated four of the six so we have these two alive and they both put boundary lines I think I must have had this boundary line wrong right no that's right oh yes I see huh Plus this little goes hang on a second you've let me do something wrong so plus it's out I know it's the one that goes up this minus goes up oh yes I'm I'm too hasty and uncertain about what I was doing so let's see this guy has a boundary going down and this guy has a boundary going up oh the others have been eliminated so that means it's something that tries to put a concave line there is gone and something that tries to put a plus line there is gone so the influence flowing up in this direction in the third step eliminates that guy and eliminates that guy leaving only this guy but now the thing I was worried about is you have to also at this point go down to two and see if there's any further constraint on what can be what can survive down there based on what has happened over here at Junction 3 now let's see this one goes up which is compatible with the survivor but this one goes down which is not compatible with a survivor so when I bring this down in step 3 this guy is eliminated so now I'm down to just one interpretation for what can be going on at vertex number two and one interpretation for vertex number three now let's see this can propagate so now that I've made a change on vertex number two I have to also see if that causes a change in vertex number one so it's propagating through and now I can see that the only possibility here is a - the label that's coming down from our survivor so that eliminates these two whew it's hard to do this by hand but I've got three of the four things labeled and even with just three of the four labeled I'm down to a single interpretation for all of the junctions and the lines between them so there's one left we have to deal with that fork where tax will better deal with it because for all we know this is not illegal not illegal drawing in this world we have five fork vertex is to place but you know what I don't have to draw much here because I know that this is forced to be a plus now and this is forced to be a plus now and there's only one fork vertex with any pluses on it at all so now I can come through and say well the only possible survivor is this one these are gone and now I have a deter potations for all of the junctions and I see that the winners are this one and this one and this one and this one so I've got a unique interpretation this line is convex this one is concave this is a boundary that's a boundary and this line is convex and that's convex now that's a lot of work so I better check and make sure I got it right you'd like to see this demonstrated to make sure I haven't made a mistake sure that right let's see add it so each of the places where a line is obscured has four possibilities labeled e the arrow junctions are labeled a the forks there are five of them at the fork Junction five so let's just step through here and see what happens boom I got it I did do it right so let's try some more what do you think will happen with this one unique solution it stopped bug in my program unthinkable what's happened it is genuinely ambiguous it can be something hanging down from the ceiling or it could be something that we can think of as a step going up from left to right let's look at something more complicated you think it'll work not enough constraint for us to figure that one out it's equally ambiguous but a little bit larger example what about this one you have it the stuff is creeping up from the lower left up to the upper right yeah bingo it worked it's unambiguous its variation on the same theme we had before but let me just for fun take these two lines out what do you think will happen now seems to be doing just fine until it hits the upper right-hand corner and discovers it can't label stuff so it propagates back down and what looked okay and the lower left is no good after all so these results are kind of consistent with what we humans do when we look at these kinds of things so it's very likely that we in our heads do have some constraint propagation apparatus that we use in vision but putting that aside and we can think about other kinds of intelligence different from human that might use this kind of mechanism to solve problems and involve a lot of constraint and finding a solution so here we saw the constraint propagation activity at work on line drawing analysis but next time what we're going to do is we're going to see it at work on map coloring and who cares about map coloring people who do scheduling because that turns out to be the same problem you