welcome to exploring computing today's video is virtual memory so i've often remarked that many of my students run too many programs at once and it affects their computers performance this is most noticeable when they come to my office hours and they're trying to get some homework done but the computer is completely sluggish and i look at their computer and they have huge amounts of programs all running simultaneously so one solution for this is if their computer does allow them to upgrade their memory they can add in more memory and that that's actually a great solution assuming that their computer will allow that upgrade and again many many laptops will not and of course if they can afford it but one of the questions is why does the computer let them open all these programs as long as the computer is able to run these additional programs doesn't that mean that there's enough memory and the answer is no the computer is using a system called virtual memory that allows you to use more memory than you actually have and in many circumstances this can actually be quite useful but if abused you will end up with very poor performance and so in this video we're going to talk about exactly what the virtual memory system is why it's there and when it works and when it doesn't let's start off with the memory hierarchy diagram so this diagram sort of emphasizes that there's lots of different types of memory and that there's memory that's really fast like ram and in main memory and then there's memory that's very slow like say magnetic tape and somewhere in the middle is our solid state drive and our hard drive and remember the faster the memory is to access the more expensive it is per byte so we can afford the slower types of memory much more easily because it's less expensive so generally we're going to have a mix now i also want to remind you that every single one of these types of memory stores bits and bytes here we've got our random access memory this is our memory module and those diagrams below are something called digital design diagrams there's something i really wanted to teach students but i never seem to quite have the time so you know maybe we move to online lectures more maybe i'll make some some online lectures on these probably not this quarter though and then we have our hard drive which stores our information using magnetic polarity and then we have a cd drive that's storing information using pits and land so depending on whether there's a pit in a particular part of the cd or dvd basically the transitions between the pits and the lands represent zeros and ones all right so here's my computer here and so what we're seeing here is that square box on the right that's supposed to represent our computer memory i'm going to assume i have a gigabyte of memory and then i have a bunch of applications i want to run and each application takes a certain amount of memory so back in the old days the computer could run one program at once so as long as i had enough memory to run a particular program so here we can see i run in the web browser it needs 400k and i've got a gigabyte so that fits in fine or i want to run my media player play some music and that takes 300k and that fits in fine so that's all good but of course we don't want to just run one program at once we run around wanted to run a bunch of programs and so in addition to the programs that we're running there's another program we need to run which is the system software operating system so that's going to take some space and i'm going to fire up my web browser and then i'm going to fire up my media player because i gotta have my tunes i'm going to start my spreadsheet let's say i'm working on a paper for my economics class i'm going to fire up my word processor and i'm starting to run out of memory here and then suppose one of my friends tries to video conference with me i'm out of memory so if we were only able to use as much memory as we actually have physically available in our actual computer memory chips i would be out of luck but fortunately we have a virtual memory system so how does our virtual memory system work well in this example i've got a gigabyte of actual computer memory chips so i've got a gigabyte of ram chips but i've also got a hard drive or you know in in most of your cases in a solid state drive and the bits on the solid state drive are the bits on the hard drive are bits just the same as the bits in main memory so what i'm going to do is i'm going to take a section of that solid state driver i'm going to take a section of that hard drive and i'm going to pretend that it's main memory but of course it's not that section of memory will be able to store information exactly the same as main memory does and the operating system that system software is going to sort of it's going to sort of deceive the programs into thinking that it's actually in main memory when it's actually on the hard drive or on the solid state drive so they're just bits the same as the bits in main memory but access to those bits is going to be much slower okay so let's see what happens here so i've got in this case i'm going to assume that i have a gigabyte of actual ram memory chips and then i've got a gigabyte on my hard disk which i'm pretending is main memory so now we're going to do the same thing we did before so i'm going to start my web browser my media player my spreadsheet my word processor and then my friend's going to call with a video conferencing system and because i no longer have just a gigabyte of main memory i now have a gigabyte of main memory and a gigabyte on my hard disk pretending it's main memory the video conference call can go ahead and start and i can throw in some other things as well so you know if i want to start with photo editor that fits as well okay so ideally what happens is i have a bunch of applications that i'm actively using the other applications are still open and their documents are still open and so from the computer standpoint you know everything is running in memory so previously we talked about how you know when a program is not running or when a document is closed that information is just start on stored in the hard disk and in order to actually run the instructions for that program need to get copied into main memory and in order to edit a particular document that needs to get copied into main memory as well so what we could do with our virtual memory is we can have the instructions for those programs open and the documents for them open and it will look like everything is running fine and what we'd like to have happen is as long as i have certain applications i'm currently actively working on maybe i've got some other applications that are open but i'm not directly interacting with it most of the time our virtual memory system is going to work pretty well so suppose i'm supposed to be working on my econ paper but i'm actually browsing the web playing my music and talking to my friends on skype now i've still got my word processor running my spreadsheet running and my photo editor running so those are open and any documents i'm currently working on there they are there i'm just not interacting with those applications at all right now so they're basically just sitting there in the background but they are open so i don't have to go to the hard disk and say you know file open those documents are actively open i'm just not interacting with them and then i realize it's starting to get pretty late and so i start working on my paper and i start working my spreadsheets and so what's going to happen is the computer's going to realize oh you're actively using these particular applications i need to move the contents the memory associated with those applications from this fake section of the hard disk which is pretending it's main memory i'm going to go ahead and swap those with some other applications that maybe you're not using all right so what'll happen is the system will take the sections of real main memory and use them for the applications that you're actively working with and then it will use the section of the hard disk which is pretending it's main memory and use that for applications that maybe you're not really actively using and so this will work pretty well and so you know you can have a lot of applications open at once and this will work now where this system gets in trouble is when you're constantly switching between all your applications because in this case there's no single set of applications that you know the active set of applications that they can leave in main memory and there's no inactive set that it can sort of leave in the background and so it's going to end up doing what's called thrashing and thrashing is where the system spends all its time moving pages back and forth pages is a term for these sections of memory that each of these applications is using cs106e students we'll be talking about this in our operating systems lecture and 105 students if you're interested i will put those lectures up for you guys after you learn how to program after the first half of the quarter is over anyway so this whole system is going to try and keep track of which sections you need and which sections are kind of inactive but if you're actively trying to use everything it will end up spending most of its time moving these sections to memory back and forth instead of actually getting work done so this is called trashing and this is really bad so you will know that you're having problems when you have all these applications open and you know the system seems to be acting very sluggish often what's happening is you don't have enough real memory and so it's using too much of the sections on the disk and maybe it's spending too much time swapping things back and forth so the best solution is if you can again if your computer will allow you to upgrade main memory buying more main memory is actually relatively cheap and it can give you a huge performance boost all right so that's our little introduction to virtual memory you